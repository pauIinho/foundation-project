{% extends "@App/base.html.twig" %}
{% block title %}Регистрация{% endblock %}
{% block content %}
    <div class="row">
        <div class="col-md-4 col-md-offset-4">
            <h3 align="center">Регистрация</h3>
            {{ form_start(form, {'method': 'post', 'action': path('app_registration'), 'attr': {'class': 'fos_user_registration_register', 'data-form': ''}}) }}
            <fieldset>
                {{ form_row(form.username) }}
                <div class="form-group">
                    {{ form_row(form.email) }}
                </div>
                <div class="form-group">
                    {{ form_row(form.plainPassword) }}
                </div>
                <div class="form-group">
                    <div>
                        <label for="fos_user_registration_form_password_repeat" class="required">Повторите пароль</label>
                        <input type="password" id="fos_user_registration_form_password_repeat" data-form-password-repeat="" required="required" class="form-control" placeholder="Пароль">
                    </div>
                </div>
                <div class="form-group">
                    {{ form_row(form.type) }}
                </div>
            </fieldset>
            <div class="form-group">
                <p align="center">
                    <input type="submit" class="btn btn-primary" value="Зарегистрироваться">
                    <input type="reset" class="btn btn-default" value="Очистить форму">
                </p>
            </div>
            {{ form_end(form) }}
        </div>
    </div>
    <script>
        $(document).ready(function () {
            var $form = $('[data-form]');
            var $usernameField = $('[data-form-username]');
            var $emailField = $('[data-form-email]');
            var $passwordField = $('[data-form-password]');
            var $repeatPasswordField = $('[data-form-password-repeat]');

            $form.on('submit', function () {
                var username = $emailField.val();
                $usernameField.val(username);
                
                if ($passwordField.val() !== $repeatPasswordField.val()) {
                    $.notify("Пароли не совпадают!", "error", { position:"bottom" });
                    return false;
                }
            })
        });
    </script>
{% endblock %}